# Default profile (LAN/local): HTTP only on port 80.
:80 {
  encode zstd gzip

  @api path /api*
  reverse_proxy @api host.docker.internal:3001

  root * /srv/td2/web
  try_files {path} /index.html
  file_server
}

# Production profile (recommended): use your real domain for automatic HTTPS.
# Uncomment and replace:
#
# your-domain.example.com {
#   encode zstd gzip
#   @api path /api*
#   reverse_proxy @api host.docker.internal:3001
#   root * /srv/td2/web
#   try_files {path} /index.html
#   file_server
#   header {
#     Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
#   }
# }

